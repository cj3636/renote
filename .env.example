# Renote Environment Configuration Example
# Copy to .env and adjust values. Empty values fall back to defaults in config.php.

# --- Application / Feature Flags ---
APP_DEBUG=false
APP_WRITE_BEHIND=true
APP_WRITE_BEHIND_MODE=batch   # batch | continuous
APP_STREAM_MAXLEN=20000
APP_CARD_MAX_LEN=262144       # 256KB
APP_REQUIRE_UUID=false

# --- Redis ---
REDIS_CONNECTION=unix         # unix | tcp
REDIS_SOCKET=/var/run/redis/redis.sock
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_USERNAME=
REDIS_PASSWORD=

# --- MariaDB ---
DB_USE_SOCKET=true
DB_SOCKET=/run/mysqld/mysqld.sock
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=pnotes
DB_USER=pnoteuser
DB_PASS=

# TLS (only when DB_USE_SOCKET=false and TCP in use)
DB_SSL_ENABLE=true
DB_SSL_VERIFY=false
DB_SSL_CA=ssl/ca.crt
DB_SSL_CRT=ssl/client.crt
DB_SSL_KEY=ssl/client.key

# --- Worker Tuning ---
WORKER_BLOCK_MS=5000
WORKER_MAX_BATCH=1000
WORKER_TRIM_EVERY=500
WORKER_MIN_OK_LAG=20
WORKER_MIN_DEGRADED_LAG=200
BATCH_FLUSH_EXPECTED_INTERVAL=180

# --- Pruning / Validation / Rate Limiting ---
PRUNE_EMPTY=true
EMPTY_MINLEN=1
RATE_LIMIT_WINDOW=60
RATE_LIMIT_MAX=300
